package co.com.techandsolve.creditcard.provider;

import javax.ws.rs.core.Response;
import javax.ws.rs.ext.ExceptionMapper;
import javax.ws.rs.ext.Provider;

import co.com.techandsolve.creditcard.exception.ValidationException;

@Provider
public class ValidationExceptionProvider implements
		ExceptionMapper<ValidationException> {

	@Override
	public Response toResponse(ValidationException exception) {

		String message = "";

		for (MethodConstraintViolation<?> methodConstraintViolation : exception
				.getConstraintViolations()) {
			message += methodConstraintViolation.getMessage() + ", ";
		}

		if (message.length() > 0) {
			message = message.substring(0, message.length() - 2);
		}

		return Response.serverError().header("internalServerError", message)
				.build();

	}

}
